import{j as A,s as y,n as v}from"./scheduler.8IMczg4P.js";import{S as $,i as k,v as m,w,n as b,f as c,u as o,e as E,p as B}from"./index.XFpmuITz.js";function F(n){const t=n-1;return t*t*t+1}function W(n,{delay:t=0,duration:e=400,easing:s=A}={}){const r=+getComputedStyle(n).opacity;return{delay:t,duration:e,easing:s,css:i=>`opacity: ${i*r}`}}function X(n,{delay:t=0,duration:e=400,easing:s=F,axis:r="y"}={}){const i=getComputedStyle(n),g=+i.opacity,p=r==="y"?"height":"width",_=parseFloat(i[p]),a=r==="y"?["top","bottom"]:["left","right"],l=a.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),d=parseFloat(i[`padding${l[0]}`]),M=parseFloat(i[`padding${l[1]}`]),u=parseFloat(i[`margin${l[0]}`]),f=parseFloat(i[`margin${l[1]}`]),L=parseFloat(i[`border${l[0]}Width`]),I=parseFloat(i[`border${l[1]}Width`]);return{delay:t,duration:e,easing:s,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*g};${p}: ${h*_}px;padding-${a[0]}: ${h*d}px;padding-${a[1]}: ${h*M}px;margin-${a[0]}: ${h*u}px;margin-${a[1]}: ${h*f}px;border-${a[0]}-width: ${h*L}px;border-${a[1]}-width: ${h*I}px;`}}function C(n){let t,e,s;return{c(){t=m("svg"),e=m("path"),s=m("path"),this.h()},l(r){t=w(r,"svg",{xmlns:!0,viewBox:!0});var i=b(t);e=w(i,"path",{d:!0,fill:!0}),b(e).forEach(c),s=w(i,"path",{d:!0,fill:!0}),b(s).forEach(c),i.forEach(c),this.h()},h(){o(e,"d","M50 20 A30 30 0 1 0 50 80 A30 30 0 1 0 50 20 Z"),o(e,"fill","var(--board-O-colour)"),o(s,"d","M50 30 A20 20 0 1 0 50 70 A20 20 0 1 0 50 30 Z"),o(s,"fill","var(--white)"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"viewBox","-5 -5 110 110")},m(r,i){E(r,t,i),B(t,e),B(t,s)},p:v,i:v,o:v,d(r){r&&c(t)}}}class Z extends ${constructor(t){super(),k(this,t,null,C,y,{})}}function T(n){let t,e;return{c(){t=m("svg"),e=m("path"),this.h()},l(s){t=w(s,"svg",{xmlns:!0,viewBox:!0});var r=b(t);e=w(r,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),b(e).forEach(c),r.forEach(c),this.h()},h(){o(e,"d","M27.5,27.5 L72.5,72.5 M72.5,27.5 L27.5,72.5"),o(e,"stroke","var(--board-X-colour)"),o(e,"stroke-width","10"),o(e,"stroke-linecap","round"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"viewBox","-5 -5 110 110")},m(s,r){E(s,t,r),B(t,e)},p:v,i:v,o:v,d(s){s&&c(t)}}}class j extends ${constructor(t){super(),k(this,t,null,T,y,{})}}class x{constructor(t){t?this.board=t%513:this.board=0}setBoard(t){this.board=t%513}clearBoard(){this.board=0}setBit(t,e){this.board|=1<<t*3+e}setBitIndex(t){this.board|=1<<t}unsetBit(t,e){this.board&=~(1<<t*3+e)}unsetBitIndex(t){this.board&=~(1<<t)}getBit(t,e){return(this.board&1<<t*3+e)!==0}getBitIndex(t){return(this.board&1<<t)!==0}logBoard(){let t=Array.from({length:3},(e,s)=>Array.from({length:3},(r,i)=>this.getBit(s,i)?"1":"0"));console.table(t)}}class q{constructor(){this.crossBoard=new x,this.naughtBoard=new x,this.turntomove="cross",this.winMasks=[7,56,448,73,146,292,84,273],this.gameEnd=0}reset(){this.crossBoard.clearBoard(),this.naughtBoard.clearBoard(),this.turntomove="cross",this.gameEnd=0}getAvailableMoves(){return new x(~(this.crossBoard.board|this.naughtBoard.board))}makeMove(t,e){if(this.gameEnd!==0||!this.getAvailableMoves().getBit(t,e))return!1;const s=this.turntomove;return s=="cross"?(this.crossBoard.setBit(t,e),this.turntomove="naught"):s=="naught"&&(this.naughtBoard.setBit(t,e),this.turntomove="cross"),this.checkForEnd(),!0}checkForEnd(){this.getAvailableMoves().board===-512&&(this.gameEnd=2);for(let e=0;e<this.winMasks.length;e++)(this.naughtBoard.board&this.winMasks[e])===this.winMasks[e]&&(this.gameEnd=-1),(this.crossBoard.board&this.winMasks[e])===this.winMasks[e]&&(this.gameEnd=1)}}class z{constructor(){this.winMasks=[7,56,448,73,146,292,84,273],this.winMaskCount=this.winMasks.length}staticEval(t,e){for(let s=0;s<this.winMaskCount;s++){if((e.board&this.winMasks[s])===this.winMasks[s])return 1;if((t.board&this.winMasks[s])===this.winMasks[s])return-1}return 0}getLegalMoves(t,e){const s=new x(~(t.board|e.board)),r=[];for(let i=0;i<9;i++)s.getBitIndex(i)&&r.push(i);return r}evalPosition(t,e,s,r=9,i=-1/0,g=1/0){const p=this.getLegalMoves(t,e),_=this.staticEval(t,e);if(r===0||_!==0||p.length===0)return[_,null];if(s){let a=-1/0,l=null;for(let d=0,M=p.length;d<M;d++){const u=p[d];e.setBitIndex(u);const f=this.evalPosition(t,e,!1,r-1,i,g);if(f[0]>a&&(a=f[0],l=u),i=Math.max(i,a),e.unsetBitIndex(u),g<=i)break}return[a,l]}else{let a=1/0,l=null;for(let d=0,M=p.length;d<M;d++){const u=p[d];t.setBitIndex(u);const f=this.evalPosition(t,e,!0,r-1,i,g);if(f[0]<a&&(a=f[0],l=u),g=Math.min(g,a),t.unsetBitIndex(u),g<=i)break}return[a,l]}}evaluate(t,e,s){const[r,i]=this.evalPosition(t,e,s);return{move:i,evaluation:r}}}function P(n){let t,e;return{c(){t=m("svg"),e=m("path"),this.h()},l(s){t=w(s,"svg",{xmlns:!0,viewBox:!0});var r=b(t);e=w(r,"path",{d:!0,fill:!0}),b(e).forEach(c),r.forEach(c),this.h()},h(){o(e,"d","M90,40 L50,40 L50,20 L10,50 L50,80 L50,60 L90,60 L90,40"),o(e,"fill","var(--board-arrow-colour)"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"viewBox","-5 -5 110 110")},m(s,r){E(s,t,r),B(t,e)},p:v,i:v,o:v,d(s){s&&c(t)}}}class U extends ${constructor(t){super(),k(this,t,null,P,y,{})}}export{z as E,U as L,j as T,Z as a,q as b,W as f,X as s};
